<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Thi Trắc Nghiệm Lịch Sử THCS Vòng 2</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f4f8;
            color: #37474f;
            transition: background-color 0.3s ease;
             position: relative;
        }
        .container {
            background-color: #fff;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 900px;
            animation: fadeIn 0.5s ease-out;
            position: relative;
            transition: all 0.3s ease;
        }
         @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
         h1 {
            text-align: center;
            color: #2196f3;
            margin-bottom: 25px;
            font-size: 2.8em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
            font-weight: 500;
        }
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
         #timer {
            font-size: 1.8em;
            font-weight: bold;
            color: #e57373;
            background-color: #ffebee;
            padding: 10px 15px;
            border-radius: 8px;
            display: inline-block;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
             margin: 0;
         }
          #quiz-container{
              display: none;
         }
          .quiz-rules {
            margin-bottom: 20px;
            padding: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            background-color: #fafafa;
            box-shadow: 0 3px 7px rgba(0,0,0,0.08);
         }
         .quiz-rules h2 {
           font-size: 1.8em;
            color: #263238;
          text-align: center;
          margin-bottom: 20px;
       }
        .quiz-rules ol {
            list-style-type: decimal;
           padding-left: 25px;
        }
       .quiz-rules li {
           margin-bottom: 10px;
            font-size: 1.2em;
            color: #455a64;
       }
         .question {
            margin-bottom: 30px;
            padding: 25px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            background-color: #fff;
            transition: all 0.3s ease;
            box-shadow: 0 3px 7px rgba(0,0,0,0.08);
            display: none;
            border-bottom: 2px solid #e0e0e0;
         }
        .question.active {
           display: block;
        }
        .question:hover {
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
         .question p {
            margin-bottom: 15px;
            font-weight: 500;
            color: #263238;
            font-size: 1.2em;
        }
         .question .question-number {
              font-size: 1.2em;
              color: #78909c;
              margin-bottom: 5px;
              display: block;
           }
          .question .answer-image {
             display: block;
             max-width: 60%;
              height: auto;
              margin: 10px auto;
          }
        label {
            display: block;
            margin-bottom: 10px;
             font-size: 1.2em;
            color: #455a64;
            cursor: pointer;

        }
        input[type="radio"], input[type="checkbox"] {
             margin-right: 10px;
             transform: scale(1.2);
        }
          input[type="checkbox"]:checked + span {
            color: #2196f3;
            font-weight: 500;
         }
           input[type="radio"]:checked + span {
             color: #2196f3;
             font-weight: 500;
         }
          .answer-label {
               display: inline-block;
               min-width: 30px;
            }
          .navigation-buttons {
              text-align: center;
              margin-top: 20px;
           }
         .navigation-buttons button {
           padding: 12px 20px;
            background-color: #2196f3;
             color: white;
           border: none;
            border-radius: 8px;
            cursor: pointer;
              margin: 0 10px;
             font-size: 1.1em;
             transition: background-color 0.3s ease, transform 0.2s ease;
             box-shadow: 0 3px 6px rgba(0,0,0,0.08);
            font-weight: 500;
       }
          .navigation-buttons button:hover{
                background-color: #1976d2;
                 transform: scale(1.05);
           }
          button[type="submit"] {
           padding: 12px 20px;
            background-color: #4caf50;
             color: white;
             border: none;
           border-radius: 8px;
            cursor: pointer;
             font-size: 1.1em;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.08);
             font-weight: 500;
             margin: 0;
        }
       button[type="submit"]:hover {
            background-color: #43a047;
           transform: scale(1.05);
        }
         #result {
            text-align: center;
            margin-top: 30px;
            display: none;
            animation: fadeInResult 0.5s ease-out;
        }
         @keyframes fadeInResult {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
         #result h2 {
            color: #2196f3;
            margin-bottom: 20px;
            font-size: 2em;
        }
        #result p {
            font-size: 1.6em;
            font-weight: bold;
            color: #263238;
        }
         #error-message {
            margin-top: 20px;
            display: none;
             color: #f44336;
            text-align: center;
             padding: 10px;
            background-color: #ffebee;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
             position: absolute;
             top: 20px;
             right: 20px;
             animation: toast 0.4s ease-in-out;
       }
       @keyframes toast{
         0%{
           opacity: 0;
           transform: translateX(20px);
        }
         100%{
            opacity: 1;
           transform: translateX(0);
         }
        }
         #back-button {
            padding: 12px 20px;
             background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
             display: block;
             margin: 20px auto;
            font-size: 1.1em;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.08);
            text-decoration: none;
            text-align: center;
            display: none;
            font-weight: 500;
        }
          #back-button:hover{
             background-color: #1976d2;
            transform: scale(1.05);
        }
          #start-button {
           padding: 12px 20px;
            background-color: #4caf50;
            color: white;
             border: none;
            border-radius: 8px;
            cursor: pointer;
             margin: 20px auto;
             font-size: 1.1em;
             transition: background-color 0.3s ease, transform 0.2s ease;
             box-shadow: 0 3px 6px rgba(0,0,0,0.08);
            font-weight: 500;
              display: block;
        }
          #start-button:hover{
             background-color: #43a047;
             transform: scale(1.05);
           }
        /* Thêm CSS cho phần điền từ */
         .fill-in-blank-inline {
            display: inline-block;
        }

        .fill-in-blank-inline .blank-input {
               margin: 0 5px;
               padding: 5px;
              border: 1px solid #e0e0e0;
              border-radius: 4px;
              width: 80px;
              display: inline-block;
               font-size: 1.2em;
        }
         .popup {
             position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1000;
            display: none;
             animation: fadeInPopup 0.3s ease-in-out;
             max-width: 400px;
        }
        @keyframes fadeInPopup{
            from{
                opacity: 0;
                transform: translate(-50%, -60%);
            }
            to{
                opacity: 1;
               transform: translate(-50%, -50%);
            }
        }
        .popup h2 {
             color: #e53935;
             margin-bottom: 15px;
         }
         .popup .icon-danger {
            font-size: 4em;
            color: #e53935;
            margin-bottom: 10px;
        }
          .popup button{
               padding: 10px 15px;
            background-color: #2196f3;
             color: white;
           border: none;
            border-radius: 8px;
            cursor: pointer;
             font-size: 1em;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 3px 6px rgba(0,0,0,0.08);
            font-weight: 500;
          }
          .popup button:hover{
               background-color: #1976d2;
                 transform: scale(1.05);
           }
         #lock-message {
            text-align: center;
            margin-top: 30px;
            display: none;
            animation: fadeInResult 0.5s ease-out;
            font-size: 1.3em;
         }
    </style>
</head>
<body>
<div class="container">
    <h1>Bài thi vòng: Tự do 2</h1>
    <div class="quiz-rules">
        <h2>QUY CHẾ DỰ THI</h2>
         <ol>
             <li>Hội đồng: Đơn vị tổ chức thành lập thi cử giám sát chéo nhau đảm bảo nghiêm túc, công bằng, nghiêm minh</li>
            <li>Thí sinh không được phép sử dụng tài liệu, sách vở, hoặc bất kỳ nguồn tham khảo nào trong suốt quá trình thi nếu không được phép của ban tổ chức. Không mang thiết bị điện tử và các thiết bị thông minh có kết nối wifi và phòng thi;</li>
            <li>Thí sinh không được phép sử dụng bất kỳ phần mềm, công cụ hay phương thức nào để gian lận trong cuộc thi, như hack, giải mã câu hỏi, hoặc can thiệp vào hệ thống thi;</li>
            <li>Thí sinh phải tuân thủ yêu cầu giám sát (ví dụ: bật camera, sử dụng phần mềm giám sát, không thoát màn hình);</li>
            <li>Không được phép quay phim hoặc chụp ảnh trong quá trình thi, cũng như chia sẻ hình ảnh bài thi với người khác;</li>
            <li>Không được phép tiết lộ thông tin liên quan đến cuộc thi, câu hỏi thi, mã ca thi hoặc kết quả thi trước khi ban tổ chức công bố chính thức;</li>
            <li>Chỉ mang bút chì, bút bi và các thiết bị không vi phạm quy chế dự thi mà ban tổ chức, giám thị quy định (Riêng giấy nháp do Hội đồng thi sẽ phải cấp cho học sinh);</li>
             <li>Thí sinh làm bài và tuân thủ theo gian quy định của Ban Tổ Chức</li>
            <li>Hội đồng thi vi phạm quy chế Ban Tổ Chức có quyền hủy kết quả thi của thí sinh.</li>
            <li>Thí sinh lưu ý: Viết hoa tên riêng, và các địa điểm (nếu có)</li>
        </ol>
        <label style="margin-bottom: 10px; display: inline-flex; align-items: center;">
            <input type="checkbox" id="rules-checkbox" style="margin-right: 5px;" checked>
            <span>Tôi đồng ý với quy chế dự thi</span>
        </label>
        <button type="button" id="start-button">Bắt đầu làm bài</button>
    </div>
    <div id="quiz-container">
        <div class="header-container">
            <div id="timer">30:00</div>
            <form id="quiz-form" style="display: inline-block;">
                <button type="submit">Nộp bài</button>
            </form>
        </div>
        <!-- Câu hỏi trắc nghiệm -->
         <div class="question active" data-question-id="1">
             <span class="question-number">Câu 1 - Lịch sử Việt Nam</span>
             <p>Vị vua nào đã ban hành bộ luật "Hồng Đức" nổi tiếng?</p>
             <label><input type="radio" name="q1" value="a"><span class="answer-label">A.</span> Lê Thánh Tông</label><br>
             <label><input type="radio" name="q1" value="b"><span class="answer-label">B.</span> Lê Thái Tổ</label><br>
              <label><input type="radio" name="q1" value="c"><span class="answer-label">C.</span> Lê Hiến Tông</label><br>
             <label><input type="radio" name="q1" value="d"><span class="answer-label">D.</span> Lê Nhân Tông</label><br>
         </div>
          <div class="question" data-question-id="2">
              <span class="question-number">Câu 2 - Lịch sử Việt Nam</span>
              <p>Ai là người lãnh đạo cuộc khởi nghĩa nông dân Tây Sơn?</p>
              <label><input type="radio" name="q2" value="a"><span class="answer-label">A.</span> Nguyễn Huệ</label><br>
              <label><input type="radio" name="q2" value="b"><span class="answer-label">B.</span> Nguyễn Nhạc</label><br>
              <label><input type="radio" name="q2" value="c"><span class="answer-label">C.</span> Nguyễn Lữ</label><br>
             <label><input type="radio" name="q2" value="d"><span class="answer-label">D.</span> Cả ba người</label><br>
          </div>
          <div class="question" data-question-id="3">
              <span class="question-number">Câu 3 - Lịch sử Việt Nam</span>
              <p>Chiến dịch nào là trận đánh lớn nhất của quân và dân ta trong cuộc kháng chiến chống Pháp (1945-1954)?</p>
              <label><input type="radio" name="q3" value="a"><span class="answer-label">A.</span> Chiến dịch Việt Bắc</label><br>
             <label><input type="radio" name="q3" value="b"><span class="answer-label">B.</span> Chiến dịch Biên Giới</label><br>
             <label><input type="radio" name="q3" value="c"><span class="answer-label">C.</span> Chiến dịch Điện Biên Phủ</label><br>
             <label><input type="radio" name="q3" value="d"><span class="answer-label">D.</span> Chiến dịch Tây Nguyên</label><br>
          </div>
          <div class="question" data-question-id="4">
            <span class="question-number">Câu 4 - Lịch sử Việt Nam</span>
           <p>Năm 1010, Lý Công Uẩn đã dời đô từ Hoa Lư về đâu?</p>
           <label><input type="radio" name="q4" value="a"><span class="answer-label">A.</span> Cổ Loa</label><br>
           <label><input type="radio" name="q4" value="b"><span class="answer-label">B.</span> Thăng Long</label><br>
           <label><input type="radio" name="q4" value="c"><span class="answer-label">C.</span> Phú Xuân</label><br>
           <label><input type="radio" name="q4" value="d"><span class="answer-label">D.</span> Gia Định</label><br>
      </div>
      <div class="question" data-question-id="5">
          <span class="question-number">Câu 5 - Lịch sử Thế Giới</span>
          <p>Ai là người tìm ra châu Mỹ?</p>
           <label><input type="radio" name="q5" value="a"><span class="answer-label">A.</span> Vasco da Gama</label><br>
          <label><input type="radio" name="q5" value="b"><span class="answer-label">B.</span> Ferdinand Magellan</label><br>
           <label><input type="radio" name="q5" value="c"><span class="answer-label">C.</span> Christopher Columbus</label><br>
           <label><input type="radio" name="q5" value="d"><span class="answer-label">D.</span> Marco Polo</label><br>
     </div>
     <div class="question" data-question-id="6">
          <span class="question-number">Câu 6 - Lịch sử Thế Giới</span>
         <p>Cuộc cách mạng nào đã lật đổ chế độ phong kiến ở Nga?</p>
            <label><input type="radio" name="q6" value="a"><span class="answer-label">A.</span> Cách mạng tư sản Anh</label><br>
            <label><input type="radio" name="q6" value="b"><span class="answer-label">B.</span> Cách mạng tháng Hai</label><br>
            <label><input type="radio" name="q6" value="c"><span class="answer-label">C.</span> Cách mạng tháng Mười</label><br>
            <label><input type="radio" name="q6" value="d"><span class="answer-label">D.</span> Cách mạng Pháp</label><br>
    </div>
    <div class="question" data-question-id="7">
           <span class="question-number">Câu 7 - Lịch sử Thế Giới</span>
          <p>Đâu là tên của một trong những kỳ quan thế giới cổ đại, được xây dựng ở Ai Cập?</p>
           <label><input type="radio" name="q7" value="a"><span class="answer-label">A.</span> Vạn Lý Trường Thành</label><br>
            <label><input type="radio" name="q7" value="b"><span class="answer-label">B.</span> Đấu trường Colosseum</label><br>
            <label><input type="radio" name="q7" value="c"><span class="answer-label">C.</span> Kim tự tháp Giza</label><br>
            <label><input type="radio" name="q7" value="d"><span class="answer-label">D.</span> Vườn treo Babylon</label><br>
    </div>
       <div class="question" data-question-id="8">
           <span class="question-number">Câu 8 - Lịch sử Thế Giới</span>
             <p>Ai là nhà triết học Hy Lạp cổ đại, thầy của Alexander Đại Đế?</p>
             <label><input type="radio" name="q8" value="a"><span class="answer-label">A.</span> Socrates</label><br>
             <label><input type="radio" name="q8" value="b"><span class="answer-label">B.</span> Plato</label><br>
            <label><input type="radio" name="q8" value="c"><span class="answer-label">C.</span> Aristotle</label><br>
             <label><input type="radio" name="q8" value="d"><span class="answer-label">D.</span> Pythagoras</label><br>
       </div>
        <div class="question" data-question-id="9">
            <span class="question-number">Câu 9 - Lịch sử Việt Nam</span>
           <p>Vị vua nào đã lãnh đạo cuộc kháng chiến chống quân Thanh xâm lược năm 1789?</p>
           <label><input type="radio" name="q9" value="a"><span class="answer-label">A.</span> Gia Long</label><br>
           <label><input type="radio" name="q9" value="b"><span class="answer-label">B.</span> Quang Trung</label><br>
            <label><input type="radio" name="q9" value="c"><span class="answer-label">C.</span> Cảnh Thịnh</label><br>
           <label><input type="radio" name="q9" value="d"><span class="answer-label">D.</span> Lê Chiêu Thống</label><br>
       </div>
        <div class="question" data-question-id="10">
            <span class="question-number">Câu 10 - Lịch sử Việt Nam</span>
            <p>Sự kiện nào đánh dấu sự ra đời của nước Việt Nam Dân chủ Cộng hòa?</p>
            <label><input type="radio" name="q10" value="a"><span class="answer-label">A.</span> Cách mạng tháng Tám</label><br>
            <label><input type="radio" name="q10" value="b"><span class="answer-label">B.</span> Chiến thắng Điện Biên Phủ</label><br>
           <label><input type="radio" name="q10" value="c"><span class="answer-label">C.</span> Hiệp định Giơnevơ</label><br>
            <label><input type="radio" name="q10" value="d"><span class="answer-label">D.</span> Tổng tuyển cử đầu tiên</label><br>
       </div>
        <div class="question" data-question-id="11">
            <span class="question-number">Câu 11 - Lịch sử Thế Giới</span>
            <p>Tổ chức nào được thành lập sau Chiến tranh thế giới thứ nhất để duy trì hòa bình?</p>
           <label><input type="radio" name="q11" value="a"><span class="answer-label">A.</span> Hội Quốc Liên</label><br>
           <label><input type="radio" name="q11" value="b"><span class="answer-label">B.</span> Liên Hợp Quốc</label><br>
            <label><input type="radio" name="q11" value="c"><span class="answer-label">C.</span> ASEAN</label><br>
            <label><input type="radio" name="q11" value="d"><span class="answer-label">D.</span> NATO</label><br>
       </div>
        <div class="question" data-question-id="12">
            <span class="question-number">Câu 12 - Lịch sử Thế Giới</span>
             <p>Ai là người phát minh ra bóng đèn điện?</p>
             <label><input type="radio" name="q12" value="a"><span class="answer-label">A.</span> Alexander Graham Bell</label><br>
            <label><input type="radio" name="q12" value="b"><span class="answer-label">B.</span> Thomas Edison</label><br>
            <label><input type="radio" name="q12" value="c"><span class="answer-label">C.</span> Nikola Tesla</label><br>
            <label><input type="radio" name="q12" value="d"><span class="answer-label">D.</span> Albert Einstein</label><br>
       </div>
        <div class="question" data-question-id="13">
            <span class="question-number">Câu 13 - Lịch sử Việt Nam</span>
            <p>Đâu là các chiến dịch lớn trong cuộc kháng chiến chống Mỹ cứu nước?</p>
           <label><input type="checkbox" name="q13" value="a"><span class="answer-label">A.</span> Chiến dịch Hồ Chí Minh</label><br>
            <label><input type="checkbox" name="q13" value="b"><span class="answer-label">B.</span> Chiến dịch Điện Biên Phủ trên không</label><br>
           <label><input type="checkbox" name="q13" value="c"><span class="answer-label">C.</span> Chiến dịch Đông Dương</label><br>
           <label><input type="checkbox" name="q13" value="d"><span class="answer-label">D.</span> Chiến dịch Tây Nguyên</label><br>
       </div>
        <div class="question" data-question-id="14">
            <span class="question-number">Câu 14 - Lịch sử Thế Giới</span>
            <p>Đâu là những quốc gia thuộc phe Trục trong Chiến tranh thế giới thứ hai?</p>
            <label><input type="checkbox" name="q14" value="a"><span class="answer-label">A.</span> Đức</label><br>
           <label><input type="checkbox" name="q14" value="b"><span class="answer-label">B.</span> Ý</label><br>
           <label><input type="checkbox" name="q14" value="c"><span class="answer-label">C.</span> Anh</label><br>
           <label><input type="checkbox" name="q14" value="d"><span class="answer-label">D.</span> Y-ta-li-a</label><br>
       </div>
         <div class="question" data-question-id="15">
            <span class="question-number">Câu 15 - Lịch sử Thế Giới</span>
            <p>
                 <span class="fill-in-blank-inline">
                       <br>Thành phố nào được coi là cái nôi của văn minh phương Tây?
                         Đáp án: <input type="text" class="blank-input" data-blank-id="1" data-correct-answer="Hy Lạp"  maxlength="20">
                  </span>
          </p>
      </div>
        <div class="question" data-question-id="16">
            <span class="question-number">Câu 16 - Lịch sử Thế Giới</span>
            <p>
                    <span class="fill-in-blank-inline">
                         <br>Ai là người đã đưa ra thuyết tương đối?
                            Đáp án: <input type="text" class="blank-input" data-blank-id="2" data-correct-answer="Einstein" maxlength="20">
                   </span>
            </p>
        </div>
        <div class="question" data-question-id="17">
            <span class="question-number">Câu 17 - Lịch sử Việt Nam</span>
            <p>
                  <span class="fill-in-blank-inline">
                       <br>Trận chiến nào trên sông Bạch Đằng diễn ra vào năm 1288?
                     Đáp án:    <input type="text" class="blank-input" data-blank-id="3" data-correct-answer="Bạch Đằng" maxlength="20">
                    </span>
           </p>
        </div>
       <div class="question" data-question-id="18">
            <span class="question-number">Câu 18 - Lịch sử Việt Nam</span>
           <p>
                  <span class="fill-in-blank-inline">
                        <br>Phong trào Cần Vương nổ ra sau khi vua
                    <input type="text" class="blank-input" data-blank-id="4" data-correct-answer="Hàm Nghi" maxlength="20">
                         bị bắt.
                    </span>
            </p>
      </div>
     <div class="question" data-question-id="19">
        <span class="question-number">Câu 19 - Lịch sử Thế Giới</span>
        <p>
                 <span class="fill-in-blank-inline">
                    <br>Tên gọi của cuộc cách mạng công nghiệp đầu tiên?
                    Đáp án: <input type="text" class="blank-input" data-blank-id="5" data-correct-answer="lần thứ nhất"  maxlength="20">
                   </span>
           </p>
      </div>
     <div class="question" data-question-id="20">
          <span class="question-number">Câu 20 - Lịch sử Thế Giới</span>
           <p>
                <span class="fill-in-blank-inline">
                   <br>Tên của hiệp ước kết thúc Chiến tranh thế giới thứ nhất?
                   Đáp án: <input type="text" class="blank-input" data-blank-id="6" data-correct-answer="Versailles" maxlength="20">
                 </span>
            </p>
      </div>
        <div class="question" data-question-id="21">
          <span class="question-number">Câu 21 - Lịch sử Việt Nam</span>
          <p>
               <span class="fill-in-blank-inline">
                   <br>Ai là tác giả của bài "Bình Ngô Đại Cáo"?
                   Đáp án: <input type="text" class="blank-input" data-blank-id="7" data-correct-answer="Nguyễn Trãi" maxlength="20">
                 </span>
            </p>
       </div>
       <div class="question" data-question-id="22">
           <span class="question-number">Câu 22 - Lịch sử Việt Nam</span>
          <p>
               <span class="fill-in-blank-inline">
                    <br>Cuộc kháng chiến chống quân Mông - Nguyên lần thứ 3 diễn ra vào năm
                     <input type="text" class="blank-input" data-blank-id="8" data-correct-answer="1287"  maxlength="20">
                   </span>
            </p>
      </div>
      <div class="question" data-question-id="23">
          <span class="question-number">Câu 23 - Lịch sử Thế Giới</span>
          <p>
                 <span class="fill-in-blank-inline">
                   <br>Thành phố nào là thủ đô của nước Nga?
                     Đáp án: <input type="text" class="blank-input" data-blank-id="9" data-correct-answer="Moscow" maxlength="20">
                    </span>
           </p>
       </div>
       <div class="question" data-question-id="24">
         <span class="question-number">Câu 24 - Lịch sử Thế Giới</span>
         <p>
                 <span class="fill-in-blank-inline">
                    <br>Hội nghị Yalta diễn ra vào năm
                    <input type="text" class="blank-input" data-blank-id="10" data-correct-answer="1945" maxlength="20">
               </span>.
           </p>
        </div>
        <div class="question" data-question-id="25">          <span class="question-number">Câu 25 - Lịch sử Việt Nam</span>
            <p>
                   <span class="fill-in-blank-inline">
                      <br>Tên vị tướng đã chỉ huy quân đội nhà Trần đánh bại quân Mông - Nguyên lần thứ 2?
                       Đáp án:  <input type="text" class="blank-input" data-blank-id="11" data-correct-answer="Trần Hưng Đạo" maxlength="20">
                     </span>
            </p>
        </div>
        <div class="question" data-question-id="26">
           <span class="question-number">Câu 26 - Lịch sử Việt Nam</span>
            <p>
                    <span class="fill-in-blank-inline">
                       <br>Triều đại nào có thời kỳ phát triển rực rỡ của văn hóa Đại Việt trong lịch sử?
                        Đáp án:  <input type="text" class="blank-input" data-blank-id="12" data-correct-answer="Lý Trần"  maxlength="20">
                      </span>
             </p>
         </div>
         <div class="question" data-question-id="27">
            <span class="question-number">Câu 27 - Lịch sử Thế Giới</span>
            <p>
                 <span class="fill-in-blank-inline">
                      <br>Cuộc chiến tranh nào được biết đến là "Cuộc chiến tranh Lạnh"?
                      Đáp án: <input type="text" class="blank-input" data-blank-id="13" data-correct-answer="Mỹ Xô" maxlength="20">
                   </span>.
             </p>
         </div>
        <div class="question" data-question-id="28">
            <span class="question-number">Câu 28 - Lịch sử Thế Giới</span>
             <p>
                  <span class="fill-in-blank-inline">
                       <br>Ai là người đã lãnh đạo cuộc kháng chiến của nhân dân Cuba chống chế độ Batista?
                       Đáp án:  <input type="text" class="blank-input" data-blank-id="14" data-correct-answer="Fidel Castro" maxlength="20">
                   </span>
             </p>
         </div>
         <div class="question" data-question-id="29">
            <span class="question-number">Câu 29 - Lịch sử Việt Nam</span>
             <p>
                    <span class="fill-in-blank-inline">
                        <br>Tên của chiến dịch giải phóng Sài Gòn năm 1975?
                         Đáp án:  <input type="text" class="blank-input" data-blank-id="15" data-correct-answer="Hồ Chí Minh" maxlength="20">
                      </span>
             </p>
         </div>
          <div class="question" data-question-id="30">
              <span class="question-number">Câu 30 - Lịch sử Thế Giới</span>
              <p>
                     <span class="fill-in-blank-inline">
                          <br>Ai là người đặt nền móng cho phong trào đấu tranh bất bạo động ở Ấn Độ?
                          Đáp án: <input type="text" class="blank-input" data-blank-id="16" data-correct-answer="Mahatma Gandhi"  maxlength="20">
                       </span>
              </p>
          </div>
        <div class="navigation-buttons">
            <button type="button" id="prev-btn">Trang trước</button>
            <button type="button" id="next-btn">Trang sau</button>
        </div>
    </div>
    <div id="result" style="display: none;">
        <h2>Kết quả bài thi</h2>
        <p>Điểm của bạn: <span id="score"></span>/300</p>
        <p id="time-taken" style="display: none;">Thời gian làm bài: <span id="time-display"></span></p>
        <a id="back-button" href="trangcanhan.html">Quay về</a>
    </div>
    <div id="error-message">
        Vui lòng chọn đáp án cho tất cả các câu hỏi trước khi nộp bài!
    </div>
     <div id="lock-message">
         Bài thi đã bị khóa vui lòng thử lại sau!
     </div>
    <div class="popup" id="exit-popup">
        <div class="icon-danger">⚠️</div>
        <h2>Cảnh báo: Bạn đã vi phạm quy chế thi.</h2>
         <p>Vui lòng quay lại bài thi!</p>
        <button id="popup-ok-btn">Đã hiểu</button>
    </div>
  </div>
  <script>
        const timerElement = document.getElementById('timer');
        let timeLeft = 30 * 60;
        let timerInterval;
        const questions = document.querySelectorAll('.question');
        let currentQuestionIndex = 0;
        let timeTaken;
        const quizForm = document.getElementById('quiz-form');
         const errorMessage = document.getElementById('error-message');
         const quizContainer =  document.getElementById('quiz-container');
         const rulesCheckbox = document.getElementById('rules-checkbox');
         const exitPopup = document.getElementById('exit-popup');
        const popupOkBtn = document.getElementById('popup-ok-btn');
        let exitStartTime = 0;
        let totalExitTime = parseFloat(localStorage.getItem('totalExitTime') || 0);
       const lockMessage = document.getElementById('lock-message');
       const link = window.location.href.split('/').pop();
       const lockTime = localStorage.getItem(`lockTime_${link}`);
       let isSubmitted = false;
        function checkLock(){
                if(lockTime){
                     const lockDate = new Date(parseInt(lockTime));
                    const now = new Date();
                    if(now < lockDate){
                        quizContainer.style.display = 'none';
                       lockMessage.style.display = 'block';
                        return true;
                    }else{
                       localStorage.removeItem(`lockTime_${link}`);
                         totalExitTime = 0;
                         localStorage.setItem('totalExitTime',0);
                         return false;
                    }
               }
               return false;
        }
      if(checkLock()){
           document.querySelector('.quiz-rules').style.display ='none';
          document.getElementById('start-button').style.display = 'none';
      }
         function updateTimer() {
            const minutes = Math.floor(timeLeft / 60);
             const seconds = timeLeft % 60;
             timerElement.textContent = `${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
             if (timeLeft <= 0) {
                 clearInterval(timerInterval);
                quizForm.submit();
                submitQuiz();
            } else {
                 timeLeft--;
             }
         }
         function startTimer() {
              updateTimer();
              timerInterval = setInterval(updateTimer, 1000);
         }
         function showQuestion(index) {
           questions.forEach((question, i) => {
                question.classList.toggle('active', i === index);
           });
        }
          function toggleQuizDisplay() {
              document.querySelector('.quiz-rules').style.display = 'none';
              quizContainer.style.display = 'block';
         }
         function submitQuiz(){
            if(quizForm.style.display != 'none') {
               quizForm.dispatchEvent(new Event('submit'));
            }
         }
         document.addEventListener('DOMContentLoaded', function() {
              if(!checkLock()){
                  startTimer();
                 showQuestion(currentQuestionIndex);
             }
         });
        document.getElementById('start-button').addEventListener('click', function(){
             if(!rulesCheckbox.checked){
                  errorMessage.textContent = "Bạn chưa đồng ý với quy chế dự thi";
                  errorMessage.style.display = 'block';
                   setTimeout(() => {
                       errorMessage.style.display = 'none';
                 }, 2000);
                   return;
             }
             toggleQuizDisplay();
          });
        quizForm.addEventListener('submit', function(e) {
            e.preventDefault();
            isSubmitted = true;
            timeTaken = 30 * 60 - timeLeft;
            let score = 0;
            let answeredQuestions = document.querySelectorAll('input[type="radio"]:checked').length + document.querySelectorAll('.blank-input[data-correct-answer]').length;
            const checkboxQuestions = document.querySelectorAll('.question[data-question-id="13"] input[type="checkbox"]:checked, .question[data-question-id="14"] input[type="checkbox"]:checked');
            answeredQuestions += checkboxQuestions.length;
              const answers = {
                 q1: 'a',
                  q2: 'd',
                  q3: 'c',
                  q4: 'b',
                  q5: 'c',
                  q6: 'c',
                  q7: 'c',
                  q8: 'c',
                  q9: 'b',
                  q10: 'a',
                  q11: 'a',
                  q12: 'b',
                  q13: ['a', 'd'],
                  q14: ['a', 'b'],
             };
  
                if(answeredQuestions === 0) {
                    errorMessage.textContent = "Bạn chưa chọn đáp án nào!";
                  errorMessage.style.display = 'block';
                     setTimeout(() => {
                         errorMessage.style.display = 'none';
                     }, 2000);
                  return;
            }
              errorMessage.style.display = 'none';
           for(let question in answers) {
                if(question === "q13" || question === "q14"){
                    const selectedCheckBox = document.querySelectorAll(`.question[data-question-id="${question.slice(1)}"] input[type="checkbox"]:checked`);
                    let correct = true;
  
                      let correctAnswers = answers[question];
                    if(selectedCheckBox.length === 0){
                        correct = false;
                        }else{
                           let countCorrect = 0;
                          selectedCheckBox.forEach(checkbox => {
                                if(correctAnswers.includes(checkbox.value)){
                                  countCorrect++;
                                }
                           })
                           if(countCorrect >= 2){
                             correct = true;
                         } else{
                           correct = false;
                         }
                        }
  
  
                        if(correct) {
                            score += 10;
                        }
                    }else{
                       const selectedAnswer = document.querySelector(`input[name="${question}"]:checked`);
                        if(selectedAnswer && selectedAnswer.value === answers[question]) {
                            score += 10;
                        }
                   }
            }
          // Tính điểm cho phần điền từ
            const blankInputs = document.querySelectorAll('.blank-input[data-correct-answer]');
           blankInputs.forEach(input => {
               const inputValue = input.value.trim();
                if(inputValue === input.dataset.correctAnswer) {
                     score += 10;
                 }
            });
            errorMessage.style.display = 'none';
              document.getElementById('score').textContent = score;
               const minutes = Math.floor(timeTaken / 60);
              const seconds = timeTaken % 60;
              document.getElementById('time-display').textContent = `${minutes < 10 ? '0' : ''}${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
               document.getElementById('time-taken').style.display = 'block';
              document.getElementById('result').style.display = 'block';
              quizContainer.style.display = 'none';
                timerElement.style.display = 'none';
              document.querySelectorAll('.navigation-buttons').forEach(e=>e.style.display ='none');
               document.getElementById('back-button').style.display = 'block';
               clearInterval(timerInterval);
             const storedScore = localStorage.getItem(`score_${link}`);
                 if(storedScore){
                     if(score > parseInt(storedScore)){
                        localStorage.setItem(`score_${link}`,score);
                    }
                 } else {
                       localStorage.setItem(`score_${link}`, score);
                  }
       });
       document.getElementById('next-btn').addEventListener('click', () => {
            if(currentQuestionIndex < questions.length-1)
           {
                 currentQuestionIndex++;
                 showQuestion(currentQuestionIndex);
            }
         });
        document.getElementById('prev-btn').addEventListener('click', () => {
           if(currentQuestionIndex > 0)
             {
                 currentQuestionIndex--;
                 showQuestion(currentQuestionIndex);
            }
       });
    // Chống copy
         document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
        });
       document.addEventListener('keydown', (e) => {
              if ((e.ctrlKey && (e.key === 'c' || e.key === 'C')) || (e.ctrlKey && (e.key === 'v' || e.key === 'V')) || (e.ctrlKey && (e.key === 'x' || e.key === 'X'))){
                e.preventDefault();
            }
         });
      window.onbeforeunload = function(e){
          if(!isSubmitted){
             exitStartTime = new Date().getTime();
           exitPopup.style.display = 'block';
             e.preventDefault();
             e.returnValue = "Bạn có chắc chắn muốn rời khỏi trang này?";
         }
        }
          popupOkBtn.addEventListener('click', function() {
             exitPopup.style.display = 'none';
              const exitEndTime = new Date().getTime();
               const exitTime = (exitEndTime - exitStartTime) / 1000;
                totalExitTime += exitTime;
                 localStorage.setItem('totalExitTime', totalExitTime);
             if (totalExitTime > 15){
                const lockDate = new Date();
                lockDate.setDate(lockDate.getDate()+2);
                localStorage.setItem(`lockTime_${link}`, lockDate.getTime());
                  checkLock();
                 }
            });
  </script>
  </body>
  </html>